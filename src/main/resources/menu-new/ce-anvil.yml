type: 'ce-anvil'
title: '&8&lLò rèn'
row: 5
data:
  sound: ENTITY_EXPERIENCE_ORB_PICKUP
  default-view:
    enchant-group:
      - "common"
      - "rare"
      - "epic"
      - "legendary"
      - "supreme"
      - "ultimate"
      - "event"
  # Preview display order mapping: index 0->preview3, 1->preview2, etc.
  # This preserves the center-first spiral pattern
  preview-index-order: [3, 2, 4, 1, 5]

items:
  # ============================================================
  # BORDER - Static decorative items
  # ============================================================
  border:
    type: default
    item:
      type: RED_STAINED_GLASS_PANE
      amount: 1
      display: '&7'
    slot: 0,1,2,3,4,5,6,7,8,9,10,11,13,15,16,17,18,26,27,28,29,30,32,33,34,35,36,37,38,39,41,42,43,44

  # ============================================================
  # INTERACTIVE SLOTS - Items that respond to clicks
  # ============================================================
  slot1:
    type: anvil-slot
    item:
      type: LIGHT_GRAY_STAINED_GLASS_PANE
      amount: 1
      display: '&fÔ 1'
      lore:
        - ''
        - '&eNhấp chọn trang bị bất kì từ kho đồ'
    slot: 12
    data:
      slot-name: slot1

  slot2:
    type: anvil-slot
    item:
      type: LIGHT_GRAY_STAINED_GLASS_PANE
      amount: 1
      display: '&fÔ 2'
      lore:
        - ''
        - '&eNhấp chọn vật phẩm sử dụng từ kho đồ'
    slot: 14
    data:
      slot-name: slot2

  # ============================================================
  # PREVIEW SLOTS - Dynamic display area
  # ============================================================
  preview1:
    type: anvil-preview
    item:
      type: BLACK_STAINED_GLASS_PANE
      amount: 1
      display: '&fXem trước'
    slot: 20
    data:
      preview-name: preview1

  preview2:
    type: anvil-preview
    item:
      type: BLACK_STAINED_GLASS_PANE
      amount: 1
      display: '&fXem trước'
    slot: 21
    data:
      preview-name: preview2

  preview3:
    type: anvil-preview
    item:
      type: BLACK_STAINED_GLASS_PANE
      amount: 1
      display: '&fXem trước'
    slot: 22
    data:
      preview-name: preview3

  preview4:
    type: anvil-preview
    item:
      type: BLACK_STAINED_GLASS_PANE
      amount: 1
      display: '&fXem trước'
    slot: 23
    data:
      preview-name: preview4

  preview5:
    type: anvil-preview
    item:
      type: BLACK_STAINED_GLASS_PANE
      amount: 1
      display: '&fXem trước'
    slot: 24
    data:
      preview-name: preview5

  # ============================================================
  # CONFIRM BUTTON - Active confirm slot
  # ============================================================
  confirm:
    type: anvil-confirm
    item:
      type: ANVIL
      amount: 1
      display: '&eHãy chọn vật phẩm và trang bị tương ứng'
      lore:
        - '&echo 2 ô trên'
    slot: 31

  # ============================================================
  # CONFIRM TEMPLATES - No slot, appearance-only definitions
  # Views fetch these as ItemStack templates
  # ============================================================
  confirm-enchant-point:
    type: default
    item:
      type: ANVIL
      amount: 1
      display: '&eXác nhận ép ngọc đột phá'
      lore:
        - ''
        - '&fNhấp để ép'

  confirm-book:
    type: default
    item:
      type: ANVIL
      amount: 1
      display: '&eXác nhận ép sách phù phép'
      lore:
        - ''
        - '&fNhấp để ép'

  confirm-remove-enchant:
    type: default
    item:
      type: ANVIL
      amount: 1
      display: '&eXác nhận tách sách phù phép'
      lore:
        - ''
        - '&fNhấp để tách'

  confirm-lore-format:
    type: default
    item:
      type: ANVIL
      amount: 1
      display: '&eXác nhận thay đổi định dạng vật phẩm'
      lore:
        - ''
        - '&fNhấp để xác nhận'

  confirm-protect-dead:
    type: default
    item:
      type: ANVIL
      amount: 1
      display: '&eXác nhận ép ngọc bảo vệ'
      lore:
        - ''
        - '&fNhấp để ép'

  confirm-gem-drill:
    type: default
    item:
      type: ANVIL
      amount: 1
      display: '&eXác nhận đục lỗ ô ngọc'
      lore:
        - ''
        - "&aTỉ lệ thành công: &f100%'"
        - ''
        - '&fNhấp để khoan'

  confirm-gem-drill-max:
    type: default
    item:
      type: ANVIL
      amount: 1
      display: '&cĐã đạt số lượng ô ngọc tối đa'

  confirm-gem-drill-with-chance:
    type: default
    item:
      type: ANVIL
      amount: 1
      display: '&eXác nhận đục lỗ ô ngọc'
      lore:
        - ''
        - '&aTỉ lệ thành công: &f{chance}%'
        - ''
        - '&c&oThất bại sẽ mất Máy Khoan'
        - ''
        - '&fNhấp để khoan'

  confirm-gem:
    type: default
    item:
      type: ANVIL
      amount: 1
      display: '&eXác nhận khảm ngọc'
      lore:
        - ''
        - '&fNhấp để khảm'

  confirm-remove-protect-dead:
    type: default
    item:
      type: ANVIL
      amount: 1
      display: '&eXác nhận tách ngọc bảo vệ'
      lore:
        - ''
        - '&fNhấp để tách'

  confirm-remove-gem:
    type: default
    item:
      type: ANVIL
      amount: 1
      display: '&eXác nhận tách ngọc khảm'
      lore:
        - ''
        - '&fNhấp để tách'

  confirm-remove-enchant-point:
    type: default
    item:
      type: ANVIL
      amount: 1
      display: '&eXác nhận tách ngọc đột phá'
      lore:
        - ''
        - '&fNhấp để tách'

  confirm-protect-destroy:
    type: default
    item:
      type: ANVIL
      amount: 1
      display: '&eXác nhận ép cuộn giấy bảo vệ'
      lore:
        - ''
        - '&fNhấp để ép'

  # ============================================================
  # PAGINATION
  # ============================================================
  previous-page:
    type: anvil-page
    item:
      type: RED_STAINED_GLASS_PANE
      amount: 1
      display: '&7'
    slot: 19
    data:
      page-action: previous-page

  next-page:
    type: anvil-page
    item:
      type: RED_STAINED_GLASS_PANE
      amount: 1
      display: '&7'
    slot: 25
    data:
      page-action: next-page

  # Page indicator templates (no slot - used by views dynamically)
  has-previous-page:
    type: default
    item:
      type: YELLOW_STAINED_GLASS_PANE
      amount: 1
      display: '&cTrang trước'

  has-next-page:
    type: default
    item:
      type: GREEN_STAINED_GLASS_PANE
      amount: 1
      display: '&aTrang kế'

  # ============================================================
  # RETURN BUTTON
  # ============================================================
  return:
    type: default
    item:
      type: GRAY_STAINED_GLASS_PANE
      amount: 1
      display: '&cTrở về'
    slot: 40
    execute:
      condition:
        - 'CLICK_TYPE LEFT'
      true-execute:
        - 'RETURN_MENU'
